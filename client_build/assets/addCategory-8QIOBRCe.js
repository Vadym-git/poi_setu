import{w as g,B as u}from"./Box-BI_qgfx2.js";import{v as y,w as f,a as x,o as a}from"./chunk-BAXFHI7N-Bm9KWlqI.js";import{u as h}from"./index.esm-BAjl1n77.js";import{z as C,A as w,C as b,D as j}from"./apiAxios-CV0VG6Xd.js";import{T as v}from"./Typography-DQKVJ4-O.js";import{T}from"./TextField-C49GQq3L.js";import{B as c}from"./Button-DyWWPvIx.js";import"./index-9ygUwf_H.js";import"./Select-DCm8lQ_9.js";import"./debounce-Be36O1Ab.js";import"./index-B8v5fBMH.js";import"./Portal-DoymUJCv.js";const I=g(function(){var n;const{register:l,handleSubmit:m,reset:d,formState:{errors:s}}=h(),i=y(),{catId:t}=f();x.useEffect(()=>{async function r(){try{if(t){const e=await w(t);e&&d({category:e.name})}}catch(e){console.error("❌ Failed to fetch categories:",e)}}r()},[t]);const p=async r=>{var e;try{if(t){const o=await j(t,r.category);console.log("✅ Category Updated:",o)}else{const o=await b(r.category);i("/"),console.log("✅ Created successful:",o.data)}}catch(o){console.error("❌ Registration failed:",((e=o.response)==null?void 0:e.data)||o.message)}};return a.jsxs(u,{component:"form",onSubmit:m(p),sx:{maxWidth:460,width:"360px",mx:"auto",display:"flex",flexDirection:"column",justifyContent:"center",gap:2},children:[a.jsx(v,{variant:"h5",textAlign:"center",children:"Category"}),a.jsx(T,{label:"Category Name",type:"text",fullWidth:!0,slotProps:{inputLabel:{shrink:!0}},...l("category",{required:"Category name is required"}),error:!!s.category,helperText:(n=s.category)==null?void 0:n.message}),a.jsx(c,{type:"submit",variant:"contained",fullWidth:!0,children:"Save"}),t&&a.jsx(c,{onClick:async()=>{var r;if(confirm("Are you sure you want to delete this category?"))try{await C(t),console.log("✅ Category deleted"),i("/")}catch(e){console.error("❌ Delete failed:",((r=e.response)==null?void 0:r.data)||e.message)}},sx:{width:10,marginTop:5,color:"white",backgroundColor:"red",padding:"8px 40px"},children:"Delete"})]})});export{I as default};
