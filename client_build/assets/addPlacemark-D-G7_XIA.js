import{b as J,g as K,d as $,u as Q,c as X,q as G,w as ce,B as pe}from"./Box-BI_qgfx2.js";import{a as w,o as t,w as de,v as ue}from"./chunk-BAXFHI7N-Bm9KWlqI.js";import{u as me,C as he}from"./index.esm-BAjl1n77.js";import{h as L,s as O,a as D,B as ye,E as Z,b as V,m as fe,q as W,k as xe,F as be,G as ge,H as Pe}from"./apiAxios-D-9zQtUh.js";import{T as z,t as Y}from"./Typography-B8lViCZQ.js";import{T as S}from"./TextField-BGGESB5O.js";import{u as ke,a as ve,m as Ce,L as Se,F as we,I as Ie,S as je,O as Be}from"./Select-C2rWPJHJ.js";import{g as Fe,l as N,M as Te}from"./MenuItem-BLJ9UwEP.js";import{B as Le}from"./Button-CXS4zM8z.js";import"./index-9ygUwf_H.js";import"./debounce-Be36O1Ab.js";import"./index-B8v5fBMH.js";import"./Portal-ZBu5SwYb.js";import"./dividerClasses-8yL69md1.js";function Re(e){return J("PrivateSwitchBase",e)}K("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ze=e=>{const{classes:o,checked:s,disabled:p,edge:i}=e,d={root:["root",s&&"checked",p&&"disabled",i&&`edge${$(i)}`],input:["input"]};return D(d,Re,o)},$e=O(ye)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:o})=>e==="start"&&o.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:o})=>e==="end"&&o.size!=="small",style:{marginRight:-12}}]}),Me=O("input",{shouldForwardProp:Z})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ne=w.forwardRef(function(o,s){const{autoFocus:p,checked:i,checkedIcon:d,defaultChecked:l,disabled:f,disableFocusRipple:h=!1,edge:I=!1,icon:b,id:c,inputProps:n,inputRef:r,name:B,onBlur:j,onChange:u,onFocus:m,readOnly:x,required:P=!1,tabIndex:g,type:k,value:F,slots:E={},slotProps:T={},...H}=o,[M,ee]=ke({controlled:i,default:!!l,name:"SwitchBase",state:"checked"}),v=ve(),oe=a=>{m&&m(a),v&&v.onFocus&&v.onFocus(a)},te=a=>{j&&j(a),v&&v.onBlur&&v.onBlur(a)},se=a=>{if(a.nativeEvent.defaultPrevented)return;const y=a.target.checked;ee(y),u&&u(a,y)};let R=f;v&&typeof R>"u"&&(R=v.disabled);const ae=k==="checkbox"||k==="radio",U={...o,checked:M,disabled:R,disableFocusRipple:h,edge:I},A=ze(U),q={slots:E,slotProps:{input:n,...T}},[re,ne]=L("root",{ref:s,elementType:$e,className:A.root,shouldForwardComponentProp:!0,externalForwardedProps:{...q,component:"span",...H},getSlotProps:a=>({...a,onFocus:y=>{var C;(C=a.onFocus)==null||C.call(a,y),oe(y)},onBlur:y=>{var C;(C=a.onBlur)==null||C.call(a,y),te(y)}}),ownerState:U,additionalProps:{centerRipple:!0,focusRipple:!h,disabled:R,role:void 0,tabIndex:null}}),[ie,le]=L("input",{ref:r,elementType:Me,className:A.input,externalForwardedProps:q,getSlotProps:a=>({...a,onChange:y=>{var C;(C=a.onChange)==null||C.call(a,y),se(y)}}),ownerState:U,additionalProps:{autoFocus:p,checked:i,defaultChecked:l,disabled:R,id:ae?c:void 0,name:B,readOnly:x,required:P,tabIndex:g,type:k,...k==="checkbox"&&F===void 0?{}:{value:F}}});return t.jsxs(re,{...ne,children:[t.jsx(ie,{...le}),M?d:b]})}),Oe=V(t.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Ee=V(t.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),He=V(t.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Ue(e){return J("MuiCheckbox",e)}const _=K("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),_e=e=>{const{classes:o,indeterminate:s,color:p,size:i}=e,d={root:["root",s&&"indeterminate",`color${$(p)}`,`size${$(i)}`]},l=D(d,Ue,o);return{...o,...l}},De=O(Ne,{shouldForwardProp:e=>Z(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.indeterminate&&o.indeterminate,o[`size${$(s.size)}`],s.color!=="default"&&o[`color${$(s.color)}`]]}})(fe(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:G(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(W()).map(([o])=>({props:{color:o,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:G(e.palette[o].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(W()).map(([o])=>({props:{color:o},style:{[`&.${_.checked}, &.${_.indeterminate}`]:{color:(e.vars||e).palette[o].main},[`&.${_.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Ve=t.jsx(Ee,{}),Ae=t.jsx(Oe,{}),qe=t.jsx(He,{}),Ge=w.forwardRef(function(o,s){const p=Q({props:o,name:"MuiCheckbox"}),{checkedIcon:i=Ve,color:d="primary",icon:l=Ae,indeterminate:f=!1,indeterminateIcon:h=qe,inputProps:I,size:b="medium",disableRipple:c=!1,className:n,slots:r={},slotProps:B={},...j}=p,u=f?h:l,m=f?h:i,x={...p,disableRipple:c,color:d,indeterminate:f,size:b},P=_e(x),g=B.input??I,[k,F]=L("root",{ref:s,elementType:De,className:X(P.root,n),shouldForwardComponentProp:!0,externalForwardedProps:{slots:r,slotProps:B,...j},ownerState:x,additionalProps:{type:"checkbox",icon:w.cloneElement(u,{fontSize:u.props.fontSize??b}),checkedIcon:w.cloneElement(m,{fontSize:m.props.fontSize??b}),disableRipple:c,slots:r,slotProps:{input:Ce(typeof g=="function"?g(x):g,{"data-indeterminate":f})}}});return t.jsx(k,{...F,classes:P})}),We=e=>{const{classes:o,inset:s,primary:p,secondary:i,dense:d}=e;return D({root:["root",s&&"inset",d&&"dense",p&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Fe,o)},Ye=O("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[{[`& .${N.primary}`]:o.primary},{[`& .${N.secondary}`]:o.secondary},o.root,s.inset&&o.inset,s.primary&&s.secondary&&o.multiline,s.dense&&o.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${Y.root}:where(& .${N.primary})`]:{display:"block"},[`.${Y.root}:where(& .${N.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Je=w.forwardRef(function(o,s){const p=Q({props:o,name:"MuiListItemText"}),{children:i,className:d,disableTypography:l=!1,inset:f=!1,primary:h,primaryTypographyProps:I,secondary:b,secondaryTypographyProps:c,slots:n={},slotProps:r={},...B}=p,{dense:j}=w.useContext(Se);let u=h??i,m=b;const x={...p,disableTypography:l,inset:f,primary:!!u,secondary:!!m,dense:j},P=We(x),g={slots:n,slotProps:{primary:I,secondary:c,...r}},[k,F]=L("root",{className:X(P.root,d),elementType:Ye,externalForwardedProps:{...g,...B},ownerState:x,ref:s}),[E,T]=L("primary",{className:P.primary,elementType:z,externalForwardedProps:g,ownerState:x}),[H,M]=L("secondary",{className:P.secondary,elementType:z,externalForwardedProps:g,ownerState:x});return u!=null&&u.type!==z&&!l&&(u=t.jsx(E,{variant:j?"body2":"body1",component:T!=null&&T.variant?void 0:"span",...T,children:u})),m!=null&&m.type!==z&&!l&&(m=t.jsx(H,{variant:"body2",color:"textSecondary",...M,children:m})),t.jsxs(k,{...F,children:[u,m]})}),Ke=48,Qe=8,Xe={PaperProps:{style:{maxHeight:Ke*4.5+Qe,width:250}}},ho=ce(function(){const{register:o,handleSubmit:s,control:p,reset:i,formState:{errors:d}}=me({defaultValues:{name:"",categories:[],title:"",address:"",openh:"",description:"",location:{type:"Point",coordinates:[0,0]},images:[],views:[]}}),{poiId:l}=de(),f=ue(),[h,I]=w.useState([]);w.useEffect(()=>{async function c(){const n=await xe();if(I(n.data),l){const r=await be(l);console.log(r),r&&i(r)}}c()},[l,i]);const b=async c=>{var n;try{l?await ge(l,c):await Pe(c),f("/")}catch(r){console.error("âŒ Failed to submit placemark:",((n=r.response)==null?void 0:n.data)||r.message)}};return t.jsxs(pe,{component:"form",onSubmit:s(b),sx:{maxWidth:800,overflowY:"auto",width:600,mx:"auto",display:"flex",flexDirection:"column",gap:2,paddingBottom:2},children:[t.jsx(z,{variant:"h5",textAlign:"center",children:"Placemark"}),t.jsx(S,{label:"Name",slotProps:{inputLabel:{shrink:!0}},...o("name",{required:!0}),error:!!d.name}),t.jsxs(we,{fullWidth:!0,children:[t.jsx(Ie,{children:"Categories"}),t.jsx(he,{name:"categories",control:p,render:({field:c})=>t.jsx(je,{multiple:!0,value:c.value,onChange:c.onChange,input:t.jsx(Be,{label:"Categories"}),renderValue:n=>h.filter(r=>n.includes(r._id)).map(r=>r.name).join(", "),MenuProps:Xe,children:h.map(n=>t.jsxs(Te,{value:n._id,children:[t.jsx(Ge,{checked:c.value.includes(n._id)}),t.jsx(Je,{primary:n.name})]},n._id))})})]}),t.jsx(S,{label:"Title",slotProps:{inputLabel:{shrink:!0}},...o("title")}),t.jsx(S,{label:"Address",slotProps:{inputLabel:{shrink:!0}},...o("address")}),t.jsx(S,{label:"Open Hours",slotProps:{inputLabel:{shrink:!0}},...o("openh")}),t.jsx(S,{label:"Description",multiline:!0,rows:12,slotProps:{inputLabel:{shrink:!0}},...o("description")}),t.jsx(S,{label:"Longitude",inputProps:{step:"any"},type:"number",slotProps:{inputLabel:{shrink:!0}},...o("location.coordinates.0",{valueAsNumber:!0})}),t.jsx(S,{label:"Latitude",inputProps:{step:"any"},type:"number",slotProps:{inputLabel:{shrink:!0}},...o("location.coordinates.1",{valueAsNumber:!0})}),t.jsx(S,{label:"Image URLs (comma-separated)",multiline:!0,rows:12,slotProps:{inputLabel:{shrink:!0}},...o("images"),onBlur:c=>{const n=c.target.value.split(",").map(r=>r.trim()).filter(Boolean);i(r=>({...r,images:n}))}}),t.jsx(Le,{type:"submit",variant:"contained",children:"Save"})]})});export{ho as default};
